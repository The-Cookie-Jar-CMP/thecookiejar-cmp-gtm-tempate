___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "The Cookie Jar",
  "categories": ["TAG_MANAGEMENT", "PERSONALIZATION"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "The Cookie Jar",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Handle the deployment of The Cookie Jar and update GTM consent state.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "eventName",
    "displayName": "Event Name",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "orgId",
    "displayName": "Organisation Id",
    "simpleValueType": true
  },
  {
    "type": "GROUP",
    "name": "default_consent_states",
    "displayName": "Default Consent States",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "default_consent_states_table",
        "displayName": "Overwrite Default Consent States",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Consent State",
            "name": "state",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "SELECT",
            "selectItems": [
              {
                "value": "granted",
                "displayValue": "Granted"
              },
              {
                "value": "denied",
                "displayValue": "Denied"
              }
            ]
          }
        ],
        "help": "Default consent states are set to explicit consent.  Use this to overwrite this to be anything you want."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "advanced_modal_settings",
    "displayName": "Advanced Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "modalMapping",
        "displayName": "Consent State Mapping",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Initial State",
            "name": "state",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Mapped State",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "help": "Use the below table to remap any of the modal consent states to another.  E.g Map ad_personalization to ad_storage.  This is handy for minimizing the number of number of input fields in the modal."
      },
      {
        "type": "TEXT",
        "name": "consentManagerHost",
        "displayName": "Consent Manager Hostname",
        "simpleValueType": true,
        "help": "Change if you are using a reverse proxy.",
        "defaultValue": "api.cookieconsentjar.com"
      },
      {
        "type": "CHECKBOX",
        "name": "enableSubdomains",
        "checkboxText": "Enable Subdomains",
        "simpleValueType": true,
        "help": "This enables subdomains to access this domains config and consent banners.  It also enables cross-domain consent for subdomains. Visit our developer guide for more information."
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const getCookieValues = require('getCookieValues');
const fromBase64 = require('fromBase64');
const JSON = require('JSON');
const logToConsole = require('logToConsole');
const localStorage = require('localStorage');
const setCookie = require('setCookie');
const getUrl = require('getUrl');
const injectScript = require('injectScript');
const setInWindow = require('setInWindow');
const callInWindow = require('callInWindow');

// Fixed Values 
const consentCookieName = "_cm_consent_";
const currentHostname = getUrl('host');
let cookieOptions = {
  'path': '/',
  'max-age': '604800',
  'secure': true,
  'samesite': 'LAX'
};
// Look to see if subdomains is enabled
if (data.enableSubdomains) {
  cookieOptions.domain = "." + currentHostname;
} 

// Function to remap consent states
function remapConsent(consentState, k, v) {
  // Create a new object to maintain immutability
  let newConsentState = {};
  // Copy properties from the original consentState to the new object
  for (var key in consentState) {
    if (consentState.hasOwnProperty(key)) {
      newConsentState[key] = consentState[key];
    }
  }
  // Check if the key v exists in the consentState object
  if (consentState.hasOwnProperty(v)) {
    // Set the new value for key k
    newConsentState[k] = consentState[v];
  } else if (v === 'granted' || v === 'denied') {
    // Set the new value for key k directly
    newConsentState[k] = v;
  } else {
    logToConsole('Key ' + v + ' does not exist in consentState.');
    return consentState;
  }
  // Return the new object
  return newConsentState;
}

function remapConsentState(remappingTable, consentState) {
  if (remappingTable && remappingTable.length > 0) {
    for (var i = 0; i < remappingTable.length; i++) {
      var row = remappingTable[i];
      var k = row.state;
      var v = row.value;
      consentState = remapConsent(consentState, k, v);
    }
  }  
  return consentState;
}

// Initialize the consent state
let consentState;
let remappingTable;

// First things first, initialize the default consent state
if (data.eventName != 'consentUpdated') {
  // Set strict defaults
  consentState = {
    security_storage: "granted",
    functionality_storage: "granted",
    // Marketing defaulting to denied
    ad_storage: "denied",
    ad_user_data: "denied",
    ad_personalization: "denied",
    analytics_storage: "denied",
    personalization_storage: "denied",
  };
  // Get the default consent remapping table
  remappingTable = data.default_consent_states_table; 
  // Look for rows in remapping table and remap consent state accordingly
  consentState = remapConsentState(remappingTable, consentState);
  setDefaultConsentState(consentState);
}
// Now the rest
function main() {
  // Get the local storage for the consent.
  let consentSettingsLocalStorage = localStorage.getItem(consentCookieName);
  // Get the cookie for the consent manager
  const cookieValues = getCookieValues(consentCookieName); // Note this is an array
  const cookieValue = cookieValues.length > 0 ? cookieValues[0] : null;

  if (consentSettingsLocalStorage) {
    remappingTable = data.modalMapping; 
    // If the cookie exists, decode and parse its value
    if (cookieValue) {
      let consentStateString = fromBase64(cookieValue);
      consentState = JSON.parse(fromBase64(cookieValue));
      // Reset the cookie
      setCookie(consentCookieName, cookieValue, cookieOptions);
    } else {
      consentState = JSON.parse(fromBase64(consentSettingsLocalStorage));
      // If cookie does not exist, but it is maintained in local storage, then reset it.
      setCookie(consentCookieName, consentSettingsLocalStorage, cookieOptions);
    }
    consentState = remapConsentState(remappingTable, consentState);
    updateConsentState(consentState);
  } else if (cookieValue) {
    // Rare instances the cookie will exist but local storage will not
    remappingTable = data.modalMapping; 
    localStorage.setItem('_cm_consent_', cookieValue);
    consentState = JSON.parse(fromBase64(cookieValue));
    // Look for rows in remapping table and remap consent state accordingly
    consentState = remapConsentState(remappingTable, consentState);
    updateConsentState(consentState);  
  } else {
    const onSuccess = () => {
      // logToConsole('The Cookie Jar: Script loaded successfully.');
    };
    
    const onFailure = () => {
      logToConsole('The Cookie Jar: Script load failed on the fetch function.');
      data.gtmOnFailure();
    };
    //Pushing 
    callInWindow('theCookieJar.fetch');
  }
}
const onSuccess = () => {
  main();
};

const onFailure = () => {
  logToConsole('The Cookie Jar: Script load failed on the init SDK.');
  data.gtmOnFailure();
};

//Pushing consentManagerHost to the window for access
let consentManagerHost = data.consentManagerHost;
let orgId = data.orgId;
let cookieString = 'path='+cookieOptions.path+';max-age='+cookieOptions['max-age']+';Secure;SameSite='+cookieOptions.samesite;
if (cookieOptions.domain) {
    cookieString += ';domain='+cookieOptions.domain;
  }
let windowVars = {
  theCookieJarOrgId: orgId,
  theCookieJarHost: consentManagerHost,
  theCookieJarCookieString: cookieString
};
setInWindow('theCookieJar', windowVars);

injectScript('https://cdn.cookieconsentjar.com/dist/v1/index.bundle.js', onSuccess, onFailure);

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_cm_consent_"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_local_storage",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_cm_consent_"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.cookieconsentjar.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_cm_consent_"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "host",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "theCookieJar"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "theCookieJar.fetch"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 8/13/2024, 2:38:08 PM


